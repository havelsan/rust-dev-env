# Rust Reference Projects
The reference projects in the below list focuses only on a specific subject with minimal code.

1. Base
    - [ Rust Documents ](../rust/share/doc/). This link will be active locally, after installing rust (Will not show up in github)
    - We use Cargo.toml file in a project directory to build and configure the project.
    - [ Debugging a project (gdb command is written in the build.sh) ](./01.base-debug)
         - "cargo build --release" clears debug information from the binary, if you want to debug a binary, you should build it only with "cargo build".
    - [ Example .gitignore file](./01.base-debug/project-01/gitignore_example) : 
         - .gitigonre file in the main directory of the project ,  we assume this is where .git directory resides, each project has a different git repository, should contain "target/" string to prevent generated files to be commit to git. We also add .rpm, .deb, .tar, .tar.gz, .zip entries to the .gitignore file.
    - [Minimum Size Executable](./01.base-minimum_sized_executable) 
         - Binary size with "cargo build" command is 3.6 MB (hello world application). The generated binary contains symbols and debug info
         - compile parameters for optimization stripping (300 K, hello world application) (project-01/Cargo.toml compile paramaters)
         - non static binary, depending on other libs and rust env. (15K , hello world application) (project-02/build.sh compile paramaters)         
         - This creates dependency to the specigic version of the rust compiler, this may not be preferred.
    - [Versioning and dependency management](./01.base-versioning_and_dependency_management) 
         - You only write direct dependencies, cargo build system will resolv sub dependencies. Similiar functionality as maven/gradle.
         - **dev-dependencies** (found in the Cargo.toml file) only used when compiling examples, tests, benches ( e.g. : cargo build --examples, cargo build --tests, ... )
         - "cargo tree" shows sub dependencies.
         - "cargo info time@1.0.0" gives information about the time package with version 1.0.0
         - if the project  depends on module "log" with version :
             - log = "^1.2.3" is exactly equivalent to log = "1.2.3".
             - log="~1.2.3"  is for  >=1.2.3, <1.3.0
             - log="~1.2"  is for  >=1.2.0,  <1.3.0
             - log="~1"  is for  >=1.0.0,  <2.0.0
             - log="*"  is for  >=0.0.0
             - log="1.*"  is for  >=1.0.0,  <2.0.0
    - [Rust Project Configurations](./01.base-rust_project_configurations)
         - If, for example, Cargo were invoked in /projects/foo/bar/baz, then the following configuration files would be probed for and unified in this order:
             - /projects/foo/.cargo/config.toml
             - /projects/.cargo/config.toml
             - /.cargo/config.toml
             - $CARGO_HOME/config.toml which defaults to $HOME/.cargo/config.toml
        - If a key is specified in multiple config files, the values will get merged together. 
             - The deeper config directory taking precedence over ancestor directories
        - Credentials are stored in $CARGO_HOME/credentials.toml , but registry/repository urls are stored in $CARGO_HOME/config.toml file. This is explained in the [devops](../devops) section.
        - NOTE: there is no way to override the variables in Cargo.toml using config.toml files. You should replace the key in Cargo.toml file using a linux command before executing it.
        - **We intentionally created project-01/.cargo/config.toml file and set the rustc variable as "rustc1" to let you know we can compile with another compiler per project.**
    - [Rust Library Project](./01.base-rust_lib)
        - We will use [GRPC](https://github.com/hyperium/tonic/tree/master/examples) as a communication layer.
        - project-01 (LIB) : The project is api interface project that supplies the api to reach the related service.
            - "cargo new service_api_01 --lib" command creates service_api_01 directory with Cargo.toml and src/lib.rs example files inside.
        - project-02 (SERVICE) :  service_01 project that service_api_01 forward the requests.
        - project-03 (CLIENT-APPLICATION):  This project uses service_api_01 to reach the service_01 service.
        - Create a starter script to test all.
    - [ Packaging ](./01.base-packaging)
        - Before starting we add  cargo rpm and deb plugin using "cargo install cargo-generate-rpm --registry crates-io"  and "cargo install cargo-deb --registry crates-io"
        - NOTE: To view build.rs outputs, build with -vv parameter : "cargo build -vv"
        - build.sh file in the project-01 does the following :
             - platfrm-group / platform configurations (link to related PLATFORMs)
             - compile project
             - generate RPM and DEB packages.
             - upload them to local rpm / deb repository ( You may check it : http://localhost:3000/rpm-test/-/packages/) 
    - [ Code Quality ](./01.base-code_quality)
        - Clippy
        - Compiling but smelling code snipptets are taken from https://rust-lang.github.io/rust-clippy/master/index.html and pasted into project-01/src/main.rs
        - build.sh in project-01 directory contains "cargo build" and "cargo clippy" commands"
        - clippy comes wiithin the rust distribution.
    - [ Test ](./01.base-test)
        - Unit Tests (project-01)
            - unit tests are located in the same rs file (in the "mod tests" section at the end of the file)
            - a part of test code may be ignored by putting "#[ignore]" above the function name. 
            - build.sh contains "cargo build" and "cargo test" and "cargo test -- --ignored" to run test.
            - one of the tests (bad_add) left failed intentionally to let you see the mechanism.
            - Panics may also be tested using "should_panic" directive.
            - dependencies that are only for test code may be indicated in "[dev-dependencies]"  section in the Cargo.toml (e.g. pretty_assertions in project-01).
        - Test Coverage ( project-02: build.sh)
            - "cargo install cargo-tarpaulin --registry crates-io" installed tarpaulin code coverage tool.
            - "cargo tarpaulin" indicated in the build.sh file runs coverage. 
            - NOTE: if the program has some failing test functions, tarpaulin sometimes may not be able to determine he coverage.
        - Documentation tests 
            - Code blocks in documentation are automatically tested when running the regular cargo test command.
            - We wont be showing a case for this testing method.
        - Integration tests (project-03)
            - Cargo looks for integration tests in tests directory next to src.
            - tests codes resides in the "tests" directory, other than "src" directory.
        - Test Case (project-04)
            - test_case crate provides procedural macro attribute that generates parametrized test instances.
        - Mocking (project-05)
            - The mockall crate allows creation of mock objects based on functionality declared with traits 
        - Fuzz Testing
            - The goal of fuzzing is to crash a program with varying input that developers and testers may not have considered when writing tests.
            - https://zerotomastery.io/blog/complete-guide-to-testing-code-in-rust
            - "cargo install cargo-afl --registry crates-io" installs cargo subcommand, but also we have "alf" dependency in the Cargo.toml file.
            - build.sh builds and starts the fuzz testing according to samples in "fuzz_samples".
            - You may have error while executing build.sh, you may nees to execute "cargo afl configure" or simiar command , and you may have to give your password (and have sudo access).
    - [ Logs ](./01.base-logging)
        - syslog crate will be used to forward all logs to local sysog service on linux (rsyslog). (project-01)
        - You may check the service "systemctl | grep syslog"
        - Logging text can be viewed in the file : /var/log/syslog (for logger in project-01 , 'grep HELLO /var/log/syslog' command filters the given text)
        - Later on linux's syslog service may be configured to forward all logs to another server, rotate the logs or ignore some of them.
    - [ Validation ](./01.base-validation)
        - "garde" crate enables us to easily validate the given values. (project-01)
2. Web
    - Wasm 
    - WebGL
    - Rocket web framework
3. Data Science
    - Array slicing 
    - Aerospike usage and modules
    - Redis usage and udf 
4. AI
    - Simple machine learning examples
    - Burn 
    - Trochrs

